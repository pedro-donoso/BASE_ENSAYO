{"remainingRequest":"C:\\Users\\admin\\Desktop\\ensayo_martes\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\admin\\Desktop\\ensayo_martes\\src\\views\\Busqueda.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\ensayo_martes\\src\\views\\Busqueda.vue","mtime":1595382976000},{"path":"C:\\Users\\admin\\Desktop\\ensayo_martes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\ensayo_martes\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\ensayo_martes\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\ensayo_martes\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQnVzcXVlZGEiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogIiIsCiAgICAgIGNvbnRleHQ6IG51bGwsCiAgICAgIGluZGljYWRvcjogIiIsCiAgICAgIGNvdGl6YWNpb246ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbInNldENvdGl6YWNpb24iXSksCiAgICBvbkNvbnRleHQoY3R4KSB7CiAgICAgIHRoaXMuY29udGV4dCA9IGN0eDsKICAgIH0sCiAgICBidXNjYXJDb3RpemFjaW9uKCkgewogICAgICBsZXQgZGF5ID0gbmV3IERhdGUodGhpcy52YWx1ZSkuZ2V0RGF5KCk7CiAgICAgIHRoaXMuaW5kaWNhZG9yID09PSAiYml0Y29pbiIKICAgICAgICA/IHRoaXMuY29uc3VsdGFBeGlvcygpCiAgICAgICAgOiBkYXkgPT09IDUgfHwgZGF5ID09PSA2CiAgICAgICAgPyBhbGVydCgiU29sbyBwdWVkZXMgY29uc3VsdGFyIGRpYXMgZGUgc2VtYW5hIHBhcmEgIiArIHRoaXMuaW5kaWNhZG9yKQogICAgICAgIDogdGhpcy5jb25zdWx0YUF4aW9zKCk7CiAgICB9LAogICAgY29uc3VsdGFBeGlvcygpIHsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KGBodHRwczovL21pbmRpY2Fkb3IuY2wvYXBpLyR7dGhpcy5pbmRpY2Fkb3J9LyR7dGhpcy5mZWNoYX1gKQogICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgaWYgKGRhdGEuZGF0YS5zZXJpZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRoaXMuY290aXphY2lvbiA9IGRhdGEuZGF0YS5zZXJpZVswXS52YWxvcjsKICAgICAgICAgICAgdGhpcy5zZXRDb3RpemFjaW9uKHsKICAgICAgICAgICAgICBmZWNoYTogdGhpcy5mZWNoYSwKICAgICAgICAgICAgICBpbmRpY2Fkb3I6IHRoaXMuaW5kaWNhZG9yLAogICAgICAgICAgICAgIHZhbG9yOgogICAgICAgICAgICAgICAgZGF0YS5kYXRhLnVuaWRhZF9tZWRpZGEgPT0gIkTDs2xhciIKICAgICAgICAgICAgICAgICAgPyBkYXRhLmRhdGEuc2VyaWVbMF0udmFsb3IgKiB0aGlzLmRvbGFyCiAgICAgICAgICAgICAgICAgIDogdGhpcy5jb3RpemFjaW9uLAogICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHRoaXMudmFsdWUpLmdldFRpbWUoKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KAogICAgICAgICAgICAgICJObyBoYXkgcmVnaXN0cm8gZGUgZGF0b3MgcGFyYSAiICsKICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhZG9yICsKICAgICAgICAgICAgICAgICIgZW4gZXN0YSBmZWNoYSIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbImluZGljYWRvcmVzIl0pLAogICAgLi4ubWFwR2V0dGVycyhbImRvbGFyIl0pLAogICAgZmVjaGEoKSB7CiAgICAgIGxldCB5ZWFyID0gdGhpcy52YWx1ZS5zbGljZSgwLCA0KTsKICAgICAgbGV0IG1vbnRoID0gdGhpcy52YWx1ZS5zbGljZSg1LCA3KTsKICAgICAgbGV0IGRhdGUgPSB0aGlzLnZhbHVlLnNsaWNlKDgsIDEwKTsKICAgICAgcmV0dXJuIGAke2RhdGV9LSR7bW9udGh9LSR7eWVhcn1gOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Busqueda.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Busqueda.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"Busqueda\">\n    <b-calendar v-model=\"value\" @context=\"onContext\" locale=\"en-US\"></b-calendar>\n    <br />\n    <select v-model=\"indicador\">\n      <option\n        v-for=\"(indicador,i) in indicadores\"\n        :key=\"i\"\n        :value=\"indicador.codigo\"\n      >{{indicador.codigo}}</option>\n    </select>\n    <br />\n    <button class=\"btn btn-info\" @click=\"buscarCotizacion\">Buscar</button>\n    <br />\n    <h2>Cotización de la busqueda: ${{cotizacion}}</h2>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions, mapGetters } from \"vuex\";\nimport axios from \"axios\";\nexport default {\n  name: \"Busqueda\",\n  data() {\n    return {\n      value: \"\",\n      context: null,\n      indicador: \"\",\n      cotizacion: \"\"\n    };\n  },\n  methods: {\n    ...mapActions([\"setCotizacion\"]),\n    onContext(ctx) {\n      this.context = ctx;\n    },\n    buscarCotizacion() {\n      let day = new Date(this.value).getDay();\n      this.indicador === \"bitcoin\"\n        ? this.consultaAxios()\n        : day === 5 || day === 6\n        ? alert(\"Solo puedes consultar dias de semana para \" + this.indicador)\n        : this.consultaAxios();\n    },\n    consultaAxios() {\n      axios\n        .get(`https://mindicador.cl/api/${this.indicador}/${this.fecha}`)\n        .then(data => {\n          if (data.data.serie.length > 0) {\n            this.cotizacion = data.data.serie[0].valor;\n            this.setCotizacion({\n              fecha: this.fecha,\n              indicador: this.indicador,\n              valor:\n                data.data.unidad_medida == \"Dólar\"\n                  ? data.data.serie[0].valor * this.dolar\n                  : this.cotizacion,\n              time: new Date(this.value).getTime()\n            });\n          } else {\n            alert(\n              \"No hay registro de datos para \" +\n                this.indicador +\n                \" en esta fecha\"\n            );\n          }\n        });\n    }\n  },\n  computed: {\n    ...mapState([\"indicadores\"]),\n    ...mapGetters([\"dolar\"]),\n    fecha() {\n      let year = this.value.slice(0, 4);\n      let month = this.value.slice(5, 7);\n      let date = this.value.slice(8, 10);\n      return `${date}-${month}-${year}`;\n    }\n  }\n};\n</script>\n"]}]}